#!/bin/bash

#SBATCH --mem=40GB

#SBATCH --job-name=bregression_2016_JECv11 # name given to the job                    

#SBATCH --account=gpu_gres  # to access gpu resources

#SBATCH --partition=gpu

#SBATCH --nodes=1       # request to run job on single node                                       

#SBATCH --ntasks=5     # request 10 CPU's (t3gpu01: balance between CPU and GPU : 5CPU/1GPU)      

#SBATCH --gres=gpu:1    # request 1 GPU's on machine 


cd /work/nchernya/HHbbgg_ETH_devel/bregression/notebooks/

python --version
##2018
#python  train_ffwd_generator.py --inp-dir /scratch/nchernya/b_regression/inputs/ttbar_2018_nanoAOD_JECv8/  --out-dir /scratch/nchernya/b_regression/outputs/2019_04_23_job23_2018_JECv8 --hparams /scratch/nchernya/b_regression/inputs/hparameters_23.json --epochs 40  --inp-files TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con07.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con1421.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con2128.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con2835.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con4956.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con714.hd5  --inp-file-valid  TTbar_nanoAOD_RegressionPerJet_nanoAOD_2018_JECv8_con3542_validation.hd5 --features Jet_pt,Jet_eta,rho,Jet_mt,Jet_leadTrackPt,Jet_leptonPtRel,Jet_leptonDeltaR,Jet_neHEF,Jet_neEmEF,Jet_vtxPt,Jet_vtxMass,Jet_vtx3dL,Jet_vtxNtrk,Jet_vtx3deL,Jet_numDaughters_pt03,Jet_energyRing_dR0_em_Jet_rawEnergy,Jet_energyRing_dR1_em_Jet_rawEnergy,Jet_energyRing_dR2_em_Jet_rawEnergy,Jet_energyRing_dR3_em_Jet_rawEnergy,Jet_energyRing_dR4_em_Jet_rawEnergy,Jet_energyRing_dR0_neut_Jet_rawEnergy,Jet_energyRing_dR1_neut_Jet_rawEnergy,Jet_energyRing_dR2_neut_Jet_rawEnergy,Jet_energyRing_dR3_neut_Jet_rawEnergy,Jet_energyRing_dR4_neut_Jet_rawEnergy,Jet_energyRing_dR0_ch_Jet_rawEnergy,Jet_energyRing_dR1_ch_Jet_rawEnergy,Jet_energyRing_dR2_ch_Jet_rawEnergy,Jet_energyRing_dR3_ch_Jet_rawEnergy,Jet_energyRing_dR4_ch_Jet_rawEnergy,Jet_energyRing_dR0_mu_Jet_rawEnergy,Jet_energyRing_dR1_mu_Jet_rawEnergy,Jet_energyRing_dR2_mu_Jet_rawEnergy,Jet_energyRing_dR3_mu_Jet_rawEnergy,Jet_energyRing_dR4_mu_Jet_rawEnergy,Jet_chHEF,Jet_chEmEF,Jet_leptonPtRelInv,isEle,isMu,isOther,Jet_mass,Jet_ptd

#########2017
#python  train_ffwd_generator.py --inp-dir /scratch/nchernya/b_regression/inputs/ttbar_2017_nanoAOD_JECv32/  --out-dir /scratch/nchernya/b_regression/outputs/2019_04_23_job23_2017_JECv32 --hparams /scratch/nchernya/b_regression/inputs/hparameters_23.json --epochs 60  --inp-files TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con012.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con1224.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con2436.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con3648.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con4860.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_con6072.hd5 --inp-file-valid TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017JECv32_validation.hd5 --features Jet_pt,Jet_eta,rho,Jet_mt,Jet_leadTrackPt,Jet_leptonPtRel,Jet_leptonDeltaR,Jet_neHEF,Jet_neEmEF,Jet_vtxPt,Jet_vtxMass,Jet_vtx3dL,Jet_vtxNtrk,Jet_vtx3deL,Jet_numDaughters_pt03,Jet_energyRing_dR0_em_Jet_rawEnergy,Jet_energyRing_dR1_em_Jet_rawEnergy,Jet_energyRing_dR2_em_Jet_rawEnergy,Jet_energyRing_dR3_em_Jet_rawEnergy,Jet_energyRing_dR4_em_Jet_rawEnergy,Jet_energyRing_dR0_neut_Jet_rawEnergy,Jet_energyRing_dR1_neut_Jet_rawEnergy,Jet_energyRing_dR2_neut_Jet_rawEnergy,Jet_energyRing_dR3_neut_Jet_rawEnergy,Jet_energyRing_dR4_neut_Jet_rawEnergy,Jet_energyRing_dR0_ch_Jet_rawEnergy,Jet_energyRing_dR1_ch_Jet_rawEnergy,Jet_energyRing_dR2_ch_Jet_rawEnergy,Jet_energyRing_dR3_ch_Jet_rawEnergy,Jet_energyRing_dR4_ch_Jet_rawEnergy,Jet_energyRing_dR0_mu_Jet_rawEnergy,Jet_energyRing_dR1_mu_Jet_rawEnergy,Jet_energyRing_dR2_mu_Jet_rawEnergy,Jet_energyRing_dR3_mu_Jet_rawEnergy,Jet_energyRing_dR4_mu_Jet_rawEnergy,Jet_chHEF,Jet_chEmEF,Jet_leptonPtRelInv,isEle,isMu,isOther,Jet_mass,Jet_ptd
#python  train_ffwd_generator.py --inp-dir /scratch/nchernya/b_regression/inputs/ttbar_2017_v3_newJEC/  --out-dir /scratch/nchernya/b_regression/outputs/2019_04_03_job23_2017_noJEC --hparams /scratch/nchernya/b_regression/inputs/hparameters_23.json --epochs 60  --inp-files TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con050_allvar.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con50100_allvar.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con100150_allvar.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con150200_allvar.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con200250_allvar.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_con250300_allvar.hd5 --inp-file-valid TTbar_nanoAOD_RegressionPerJet_nanoAOD_2017_v3_newJEC_validation_allvar.hd5 --features Jet_pt,Jet_eta,rho,Jet_mt,Jet_leadTrackPt,Jet_leptonPtRel,Jet_leptonDeltaR,Jet_neHEF,Jet_neEmEF,Jet_vtxPt,Jet_vtxMass,Jet_vtx3dL,Jet_vtxNtrk,Jet_vtx3deL,Jet_numDaughters_pt03,Jet_energyRing_dR0_em_Jet_rawEnergy,Jet_energyRing_dR1_em_Jet_rawEnergy,Jet_energyRing_dR2_em_Jet_rawEnergy,Jet_energyRing_dR3_em_Jet_rawEnergy,Jet_energyRing_dR4_em_Jet_rawEnergy,Jet_energyRing_dR0_neut_Jet_rawEnergy,Jet_energyRing_dR1_neut_Jet_rawEnergy,Jet_energyRing_dR2_neut_Jet_rawEnergy,Jet_energyRing_dR3_neut_Jet_rawEnergy,Jet_energyRing_dR4_neut_Jet_rawEnergy,Jet_energyRing_dR0_ch_Jet_rawEnergy,Jet_energyRing_dR1_ch_Jet_rawEnergy,Jet_energyRing_dR2_ch_Jet_rawEnergy,Jet_energyRing_dR3_ch_Jet_rawEnergy,Jet_energyRing_dR4_ch_Jet_rawEnergy,Jet_energyRing_dR0_mu_Jet_rawEnergy,Jet_energyRing_dR1_mu_Jet_rawEnergy,Jet_energyRing_dR2_mu_Jet_rawEnergy,Jet_energyRing_dR3_mu_Jet_rawEnergy,Jet_energyRing_dR4_mu_Jet_rawEnergy,Jet_chHEF,Jet_chEmEF,Jet_leptonPtRelInv,isEle,isMu,isOther,Jet_mass,Jet_ptd

#########2016 new nanoAOD
python  train_ffwd_generator.py --inp-dir /scratch/nchernya/b_regression/inputs/ttbar_2016_nanoAOD_JECv11/  --out-dir /scratch/nchernya/b_regression/outputs/2019_10_03_job23_2016_JECv11/ --hparams /scratch/nchernya/b_regression/inputs/hparameters_23.json --epochs 50  --inp-files TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con015.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con1530.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con3045.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con4560.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con6075.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con7590.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con90100.hd5,TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_con100115.hd5 --inp-file-valid TTbar_nanoAOD_RegressionPerJet_nanoAOD_2016_JECv11_validation.hd5 --features Jet_pt,Jet_eta,rho,Jet_mt,Jet_leadTrackPt,Jet_leptonPtRel,Jet_leptonDeltaR,Jet_neHEF,Jet_neEmEF,Jet_vtxPt,Jet_vtxMass,Jet_vtx3dL,Jet_vtxNtrk,Jet_vtx3deL,Jet_numDaughters_pt03,Jet_energyRing_dR0_em_Jet_rawEnergy,Jet_energyRing_dR1_em_Jet_rawEnergy,Jet_energyRing_dR2_em_Jet_rawEnergy,Jet_energyRing_dR3_em_Jet_rawEnergy,Jet_energyRing_dR4_em_Jet_rawEnergy,Jet_energyRing_dR0_neut_Jet_rawEnergy,Jet_energyRing_dR1_neut_Jet_rawEnergy,Jet_energyRing_dR2_neut_Jet_rawEnergy,Jet_energyRing_dR3_neut_Jet_rawEnergy,Jet_energyRing_dR4_neut_Jet_rawEnergy,Jet_energyRing_dR0_ch_Jet_rawEnergy,Jet_energyRing_dR1_ch_Jet_rawEnergy,Jet_energyRing_dR2_ch_Jet_rawEnergy,Jet_energyRing_dR3_ch_Jet_rawEnergy,Jet_energyRing_dR4_ch_Jet_rawEnergy,Jet_energyRing_dR0_mu_Jet_rawEnergy,Jet_energyRing_dR1_mu_Jet_rawEnergy,Jet_energyRing_dR2_mu_Jet_rawEnergy,Jet_energyRing_dR3_mu_Jet_rawEnergy,Jet_energyRing_dR4_mu_Jet_rawEnergy,Jet_chHEF,Jet_chEmEF,Jet_leptonPtRelInv,isEle,isMu,isOther,Jet_mass,Jet_ptd

###########2016 old#### HEPPY
#python  train_ffwd_generator.py --inp-dir   /scratch/nchernya/b_regression/inputs/ttbar_2016_legacy_JECv11/  --out-dir /scratch/nchernya/b_regression/outputs/2019_06_03_job23_2016_LegacyJEC --hparams /scratch/nchernya/b_regression/inputs//hparameters_23.json --epochs 30  --inp-files TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con020_allvar_morevar.hd5,TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con2040_allvar_morevar.hd5,TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con4060_allvar_morevar.hd5,TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con6080_allvar_morevar.hd5,TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con80100_allvar_morevar.hd5,TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_con100120_allvar_morevar.hd5  --inp-file-valid  TTbar_legacy2016_JECv11_RegressionPerJet_heppy_energyRings_forTraining_legacy_2ptds_validation_allvar_morevar.hd5  --features Jet_pt,Jet_eta,rho,Jet_mt,Jet_leadTrackPt,Jet_leptonPtRel,Jet_leptonDeltaR,Jet_neHEF,Jet_neEmEF,Jet_vtxPt,Jet_vtxMass,Jet_vtx3dL,Jet_vtxNtrk,Jet_vtx3deL_significance,Jet_numDaughters_pt03,Jet_energyRing_dR0_em_Jet_rawEnergy,Jet_energyRing_dR1_em_Jet_rawEnergy,Jet_energyRing_dR2_em_Jet_rawEnergy,Jet_energyRing_dR3_em_Jet_rawEnergy,Jet_energyRing_dR4_em_Jet_rawEnergy,Jet_energyRing_dR0_neut_Jet_rawEnergy,Jet_energyRing_dR1_neut_Jet_rawEnergy,Jet_energyRing_dR2_neut_Jet_rawEnergy,Jet_energyRing_dR3_neut_Jet_rawEnergy,Jet_energyRing_dR4_neut_Jet_rawEnergy,Jet_energyRing_dR0_ch_Jet_rawEnergy,Jet_energyRing_dR1_ch_Jet_rawEnergy,Jet_energyRing_dR2_ch_Jet_rawEnergy,Jet_energyRing_dR3_ch_Jet_rawEnergy,Jet_energyRing_dR4_ch_Jet_rawEnergy,Jet_energyRing_dR0_mu_Jet_rawEnergy,Jet_energyRing_dR1_mu_Jet_rawEnergy,Jet_energyRing_dR2_mu_Jet_rawEnergy,Jet_energyRing_dR3_mu_Jet_rawEnergy,Jet_energyRing_dR4_mu_Jet_rawEnergy,Jet_chHEF,Jet_chEmEF,Jet_leptonPtRelInv,isEle,isMu,isOther,Jet_mass,Jet_ptd_breg
